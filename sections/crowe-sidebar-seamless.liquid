{%- comment -%}
üñ§ Southwest Mushrooms Seamless Sidebar
Professional monochrome design with no gaps
{%- endcomment -%}

<style>
/* üé® Seamless Professional Design */
body {
  margin: 0;
  background: #000000;
}

.main-content {
  margin-left: 0;
  transition: margin-left 0.4s ease;
}

.sidebar-open .main-content {
  margin-left: 280px;
}

.southwest-sidebar {
  position: fixed;
  top: 0;
  left: -280px;
  width: 280px;
  height: 100vh;
  background: linear-gradient(180deg, 
    rgba(0, 0, 0, 0.98) 0%,
    rgba(10, 10, 10, 0.95) 50%,
    rgba(0, 0, 0, 0.98) 100%
  );
  backdrop-filter: blur(30px) saturate(1.8);
  -webkit-backdrop-filter: blur(30px) saturate(1.8);
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 
    8px 0 32px rgba(0, 0, 0, 0.8),
    inset -1px 0 0 rgba(255, 255, 255, 0.05);
  z-index: 9999;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  overflow-y: auto;
  overflow-x: hidden;
}

.southwest-sidebar.active {
  left: 0;
}

/* üè¢ Brand Header */
.sidebar-header {
  padding: 24px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.02) 0%,
    transparent 100%
  );
  position: relative;
}

.brand-logo {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  transition: all 0.3s ease;
}

.brand-logo:hover {
  transform: translateX(4px);
}

.logo-image {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  box-shadow: 
    0 4px 12px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.brand-logo:hover .logo-image {
  box-shadow: 
    0 6px 20px rgba(255, 255, 255, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}

.brand-text {
  color: #ffffff;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* üîò Toggle Button */
.sidebar-toggle {
  position: fixed;
  top: 20px;
  left: 20px;
  width: 48px;
  height: 48px;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10000;
  transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.sidebar-toggle:hover {
  background: rgba(20, 20, 20, 0.9);
  border-color: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
}

.toggle-icon {
  color: #ffffff;
  font-size: 18px;
  transition: all 0.3s ease;
}

.sidebar-open .toggle-icon {
  transform: rotate(90deg);
}

/* üìç Navigation */
.sidebar-nav {
  padding: 20px 0;
}

.nav-section {
  margin-bottom: 32px;
}

.nav-section-title {
  padding: 0 24px 12px;
  font-size: 11px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.nav-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.nav-item {
  margin: 2px 16px;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 12px;
  color: rgba(255, 255, 255, 0.9);
  text-decoration: none;
  border-radius: 12px;
  transition: all 0.3s ease;
  font-weight: 500;
  font-size: 14px;
  position: relative;
  overflow: hidden;
}

.nav-link::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, 
    transparent,
    rgba(255, 255, 255, 0.05),
    transparent
  );
  transition: left 0.5s ease;
}

.nav-link:hover::before {
  left: 100%;
}

.nav-link:hover {
  background: rgba(255, 255, 255, 0.06);
  color: #ffffff;
  transform: translateX(4px);
  box-shadow: 
    0 4px 20px rgba(255, 255, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.nav-link.active {
  background: rgba(255, 255, 255, 0.08);
  color: #ffffff;
  box-shadow: 
    0 4px 20px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.nav-icon {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.nav-icon svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  fill: none;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: all 0.3s ease;
}

.nav-link:hover .nav-icon svg {
  transform: scale(1.1);
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
}

/* ü§ñ Crowe Logic Section */
.crowe-logic-section {
  margin: 24px 16px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  backdrop-filter: blur(10px);
}

.crowe-logic-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.crowe-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  box-shadow: 
    0 4px 12px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.crowe-title {
  color: #ffffff;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.3px;
}

.crowe-status {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.status-dot {
  width: 8px;
  height: 8px;
  background: #00ff88;
  border-radius: 50%;
  animation: pulse 2s infinite;
  box-shadow: 0 0 8px #00ff88;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.status-text {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
}

.crowe-cta {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: #ffffff;
  padding: 12px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  width: 100%;
  text-align: center;
}

.crowe-cta:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(255, 255, 255, 0.1);
}

/* üìä Stats Footer */
.sidebar-footer {
  padding: 20px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  margin-top: auto;
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.02) 0%,
    transparent 100%
  );
}

.stats-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.stat-item {
  text-align: center;
}

.stat-value {
  display: block;
  font-size: 18px;
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 4px;
}

.stat-label {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.6);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* üì± Responsive Design */
@media (max-width: 768px) {
  .southwest-sidebar {
    width: 100vw;
    left: -100vw;
  }
  
  .sidebar-open .main-content {
    margin-left: 0;
  }
  
  .sidebar-toggle {
    top: 16px;
    left: 16px;
    width: 44px;
    height: 44px;
  }
}

/* üîÑ Loading States */
.nav-link.loading {
  pointer-events: none;
  opacity: 0.7;
}

.nav-link.loading::after {
  content: '';
  position: absolute;
  right: 12px;
  width: 12px;
  height: 12px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-top: 1px solid #ffffff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* üåü Enhanced Hover Effects */
.nav-link:hover {
  backdrop-filter: blur(10px);
}

.sidebar-header:hover .brand-text {
  text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
}
</style>

<!-- üîò Sidebar Toggle Button -->
<button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Toggle Navigation">
  <span class="toggle-icon">‚ò∞</span>
</button>

<!-- üñ§ Southwest Mushrooms Sidebar -->
<aside class="southwest-sidebar" id="southwestSidebar">
  
  <!-- üè¢ Brand Header -->
  <div class="sidebar-header">
    <a href="{{ routes.root_url }}" class="brand-logo">
      <img 
        src="{{ 'southwest-mushrooms-logo.PNG' | asset_url }}" 
        alt="Southwest Mushrooms" 
        class="logo-image"
        loading="lazy"
        onerror="this.style.display='none'"
      />
      <span class="brand-text">Southwest Mushrooms</span>
    </a>
  </div>
  
  <!-- üìç Main Navigation -->
  <nav class="sidebar-nav">
    
    <!-- Primary Navigation -->
    <div class="nav-section">
      <h3 class="nav-section-title">Navigate</h3>
      <ul class="nav-list">
        
        <li class="nav-item">
          <a href="{{ routes.root_url }}" class="nav-link">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9,22 9,12 15,12 15,22"/>
              </svg>
            </span>
            Dashboard
          </a>
        </li>
        
        <li class="nav-item">
          <a href="{{ collections.all.url }}" class="nav-link">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 8v6"/>
                <path d="m5.64 7l4.24 2.45m4.24 2.45L18.36 17"/>
                <path d="m5.64 17 4.24-2.45m4.24-2.45L18.36 7"/>
              </svg>
            </span>
            Products
          </a>
        </li>
        
        <li class="nav-item">
          <a href="/pages/growing-guides" class="nav-link">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14,2 14,8 20,8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10,9 9,9 8,9"/>
              </svg>
            </span>
            Growing Guides
          </a>
        </li>
        
        <li class="nav-item">
          <a href="/pages/audiobook" class="nav-link">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
              </svg>
            </span>
            Voice Assistant
          </a>
        </li>
        
        <li class="nav-item">
          <a href="/pages/resources" class="nav-link">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
            </span>
            Resources
          </a>
        </li>
        
      </ul>
    </div>
    
    <!-- Account Section -->
    <div class="nav-section">
      <h3 class="nav-section-title">Account</h3>
      <ul class="nav-list">
        
        <li class="nav-item">
          <a href="{{ routes.cart_url }}" class="nav-link">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24">
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
              </svg>
            </span>
            Cart
            {%- if cart.item_count > 0 -%}
              <span class="cart-count">{{ cart.item_count }}</span>
            {%- endif -%}
          </a>
        </li>
        
        {%- if customer -%}
          <li class="nav-item">
            <a href="{{ routes.account_url }}" class="nav-link">
              <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
              </span>
              Account
            </a>
          </li>
          
          <li class="nav-item">
            <a href="{{ routes.account_logout_url }}" class="nav-link">
              <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                  <polyline points="16,17 21,12 16,7"/>
                  <line x1="21" y1="12" x2="9" y2="12"/>
                </svg>
              </span>
              Sign Out
            </a>
          </li>
        {%- else -%}
          <li class="nav-item">
            <a href="{{ routes.account_login_url }}" class="nav-link">
              <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                  <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                  <polyline points="10,17 15,12 10,7"/>
                  <line x1="15" y1="12" x2="3" y2="12"/>
                </svg>
              </span>
              Sign In
            </a>
          </li>
        {%- endif -%}
        
      </ul>
    </div>
    
  </nav>
  
  <!-- ü§ñ Crowe Logic AI Section -->
  <div class="crowe-logic-section">
    <div class="crowe-logic-header">
      <img 
        src="{{ 'crowe-avatar.PNG' | asset_url }}" 
        alt="Crowe Logic AI" 
        class="crowe-avatar"
        loading="lazy"
        onerror="this.style.display='none'"
      />
      <span class="crowe-title">Crowe Logic AI</span>
    </div>
    
    <div class="crowe-status">
      <span class="status-dot"></span>
      <span class="status-text">AI Assistant Online</span>
    </div>
    
    <button class="crowe-cta" onclick="openCroweLogic()">
      Ask AI Assistant
    </button>
  </div>
  
  <!-- üìä Stats Footer -->
  <div class="sidebar-footer">
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-value">{{ section.settings.stats_varieties | default: '50+' }}</span>
        <span class="stat-label">Varieties</span>
      </div>
      <div class="stat-item">
        <span class="stat-value">{{ section.settings.stats_growers | default: '5K+' }}</span>
        <span class="stat-label">Growers</span>
      </div>
    </div>
  </div>
  
</aside>

<script>
// üöÄ Sidebar Functionality
let sidebarOpen = false;

function toggleSidebar() {
  const sidebar = document.getElementById('southwestSidebar');
  const body = document.body;
  
  sidebarOpen = !sidebarOpen;
  
  if (sidebarOpen) {
    sidebar.classList.add('active');
    body.classList.add('sidebar-open');
  } else {
    sidebar.classList.remove('active');
    body.classList.remove('sidebar-open');
  }
}

// Close sidebar when clicking outside
document.addEventListener('click', function(event) {
  const sidebar = document.getElementById('southwestSidebar');
  const toggle = document.querySelector('.sidebar-toggle');
  
  if (sidebarOpen && !sidebar.contains(event.target) && !toggle.contains(event.target)) {
    toggleSidebar();
  }
});

// Close sidebar on escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape' && sidebarOpen) {
    toggleSidebar();
  }
});

// Crowe Logic Integration
function openCroweLogic() {
  // Navigate to Crowe Logic page or open modal
  window.location.href = '/pages/crowe-logic';
}

// Active link highlighting
document.addEventListener('DOMContentLoaded', function() {
  const currentPath = window.location.pathname;
  const navLinks = document.querySelectorAll('.nav-link');
  
  navLinks.forEach(link => {
    if (link.getAttribute('href') === currentPath) {
      link.classList.add('active');
    }
  });
});

// Cart count update
function updateCartCount(count) {
  const cartLink = document.querySelector('.nav-link[href*="cart"]');
  let countElement = cartLink.querySelector('.cart-count');
  
  if (count > 0) {
    if (!countElement) {
      countElement = document.createElement('span');
      countElement.className = 'cart-count';
      cartLink.appendChild(countElement);
    }
    countElement.textContent = count;
  } else if (countElement) {
    countElement.remove();
  }
}

// Listen for cart updates
document.addEventListener('cart:updated', function(event) {
  updateCartCount(event.detail.item_count);
});
</script>

<style>
/* üõí Cart Count Badge */
.cart-count {
  background: #ffffff;
  color: #000000;
  font-size: 11px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 12px;
  margin-left: auto;
  min-width: 20px;
  text-align: center;
  box-shadow: 0 2px 8px rgba(255, 255, 255, 0.2);
}

/* üéØ Active Link Styles */
.nav-link.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 20px;
  background: #ffffff;
  border-radius: 0 3px 3px 0;
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
}
</style>

{%- comment -%}
üíé Schema Settings for Theme Customizer
{%- endcomment -%}

{% schema %}
{
  "name": "Seamless Sidebar",
  "settings": [
    {
      "type": "header",
      "content": "üñ§ Sidebar Settings"
    },
    {
      "type": "text",
      "id": "stats_varieties",
      "label": "Varieties Count",
      "default": "50+"
    },
    {
      "type": "text", 
      "id": "stats_growers",
      "label": "Growers Count",
      "default": "5K+"
    }
  ]
}
{% endschema %}
